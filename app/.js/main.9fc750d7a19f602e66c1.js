(()=>{"use strict";var __webpack_exports__={};const buttonPanelElement=document.querySelector(".button-panel"),outputOperationsElement=document.querySelector(".operation-panel .value"),outputResultElement=document.querySelector(".result .value"),themeElements=document.querySelectorAll(".theme");let memValue=0,isPow=!1,isRoot=!0;const OPERATORS=["+","-","*","/"],POWER="POWER(";let data={operation:[],formula:[]},calcButtons=[{symbol:"AC",formula:!1,type:"key"},{symbol:"←",formula:!1,type:"key"},{symbol:"%",formula:"/100",type:"number"},{symbol:"÷",formula:"/",type:"operator"},{symbol:"x",formula:"*",type:"operator"},{symbol:"-",formula:"-",type:"operator"},{symbol:"+",formula:"+",type:"operator"},{symbol:"=",formula:"=",type:"calculate"},{symbol:".",formula:".",type:"number"},{symbol:1,formula:1,type:"number"},{symbol:2,formula:2,type:"number"},{symbol:3,formula:3,type:"number"},{symbol:4,formula:4,type:"number"},{symbol:5,formula:5,type:"number"},{symbol:6,formula:6,type:"number"},{symbol:7,formula:7,type:"number"},{symbol:8,formula:8,type:"number"},{symbol:9,formula:9,type:"number"},{symbol:0,formula:0,type:"number"},{symbol:"(",formula:"(",type:"number"},{symbol:")",formula:")",type:"number"},{symbol:"mc",formula:!1,type:"save"},{symbol:"m+",formula:!1,type:"save"},{symbol:"m-",formula:!1,type:"save"},{symbol:"mr",formula:!1,type:"save"},{name:"powY",symbol:"xy",formula:POWER,type:"math_function"},{name:"pow2",symbol:"x2",formula:POWER,type:"math_function"},{name:"pow3",symbol:"x3",formula:POWER,type:"math_function"},{name:"10powX",symbol:"10powX",formula:POWER,type:"math_function"},{name:"exp",symbol:"ex",formula:"Math.exp(",type:"math_function"},{name:"1divX",symbol:"1divX",formula:"1/(",type:"math_function"},{name:"square-root",symbol:"√(",formula:"Math.sqrt(",type:"math_function"},{name:"qube-root",symbol:"(3)√(",formula:"Math.cbrt(",type:"math_function"},{name:"ln",symbol:"ln2",formula:!1,type:"math_function"},{name:"log10",symbol:"log10",formula:"Math.log(10)",type:"math_function"},{name:"x-root",symbol:"√(",formula:POWER,type:"math_function"}];function calculator(button){if("operator"==button.type)data.operation.push(button.symbol),data.formula.push(button.formula);else if("number"==button.type)data.operation.push(button.symbol),data.formula.push(button.formula);else if("key"==button.type)"AC"==button.symbol?(data.operation=[],data.formula=[],updateOutputResult(0)):"←"==button.symbol&&(data.operation.pop(),data.formula.pop());else if("save"==button.type)"m+"==button.symbol?memValue+=parseInt(outputResultElement.innerHTML,10):"m-"==button.symbol?memValue-=parseInt(outputResultElement.innerHTML,10):"mr"==button.symbol?updateOutputResult(memValue):"mc"==button.symbol&&(memValue=0);else if("math_function"==button.type){let t,o;"powY"==button.name?(t="^(",o=button.formula,data.operation.push(t),data.formula.push(o),isPow=!0):"pow2"==button.name?(t="^(",o=button.formula,data.operation.push(t),data.formula.push(o),data.operation.push("2)"),data.formula.push("2)"),isPow=!0):"pow3"==button.name?(t="^(",o=button.formula,data.operation.push(t),data.formula.push(o),data.operation.push("3)"),data.formula.push("3)"),isPow=!0):"10powX"==button.name?(t="10^(",o=button.formula,data.operation.push(t),data.formula.push(o),isPow=!0):"exp"==button.name?(t="exp(",o=button.formula,data.operation.push(t),data.formula.push(o)):"1divX"==button.name?(data.operation.push(button.formula),data.formula.push(button.formula)):"square-root"==button.name||"qube-root"==button.name?(data.operation.push(button.symbol),data.formula.push(button.formula)):"ln"==button.name?(data.operation.push(Math.LN2.toFixed(5)),data.formula.push(Math.LN2.toFixed(5))):"log10"==button.name?(data.operation.push(Math.log(10)),data.formula.push(button.formula)):"x-root"==button.name&&(data.operation.push(button.symbol),data.formula.push(button.formula),isPow=!0,isRoot=!0)}else if("calculate"==button.type){let formulaStr=data.formula.join("");return isPow&&(formulaStr=getPowBase(formulaStr),isPow=!1),void updateOutputResult(eval(formulaStr))}updateOutputOperation(data.operation.join(""))}function getPowBase(t){let o=search(data.formula,POWER);const a=powerBaseGetter(data.formula,o);if(isRoot&&""===a[0])return data.formula.pop(),data.formula.shift(),data.formula.unshift("Math.sqrt("),data.formula.push(")"),t=data.formula.join(""),isRoot=!1,t;if(isRoot)a.forEach((o=>{let a=o+POWER,e="Math.pow("+o+",1/";t=t.replace(a,e)}));else if(""===a[0]){let o=POWER,a="Math.pow(10,";t=t.replace(o,a)}else a.forEach((o=>{let a=o+POWER,e="Math.pow("+o+",";t=t.replace(a,e)}));return t}function powerBaseGetter(t,o){let a=[];return o.forEach((o=>{let e=[],u=0,m=o-1;for(;m>=0;){"("==t[m]&&u--,")"==t[m]&&u++;let o=!1;OPERATORS.forEach((a=>{t[m]==a&&(o=!0)}));let a=t[m]==POWER;if(o&&0==u||a)break;e.unshift(t[m]),m--}a.push(e.join(""))})),a}function search(t,o){let a=[];return t.forEach(((t,e)=>{t==o&&a.push(e)})),a}function updateOutputOperation(t){outputOperationsElement.innerHTML=t}function updateOutputResult(t){outputResultElement.innerHTML=t}function themeSwitch(t){themeElements.forEach((o=>{o.classList.add(t)}))}buttonPanelElement.addEventListener("click",(t=>{const o=t.target.textContent;t.target.closest("button")&&calcButtons.forEach((a=>{(a.symbol==o||a.name==t.target.id)&&calculator(a)}))})),themeSwitch("dark")})();