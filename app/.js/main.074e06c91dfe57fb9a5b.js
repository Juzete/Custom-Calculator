(()=>{"use strict";var __webpack_exports__={},buttonPanelElement=document.querySelector(".button-panel"),outputOperationsElement=document.querySelector(".operation-panel .value"),outputResultElement=document.querySelector(".result .value"),themeElements=document.querySelectorAll(".theme"),memValue=0,isPow=!1,isRoot=!0,OPERATORS=["+","-","*","/"],POWER="POWER(",data={operation:[],formula:[]},calcButtons=[{symbol:"AC",formula:!1,type:"key"},{symbol:"←",formula:!1,type:"key"},{symbol:"%",formula:"/100",type:"number"},{symbol:"÷",formula:"/",type:"operator"},{symbol:"x",formula:"*",type:"operator"},{symbol:"-",formula:"-",type:"operator"},{symbol:"+",formula:"+",type:"operator"},{symbol:"=",formula:"=",type:"calculate"},{symbol:".",formula:".",type:"number"},{symbol:1,formula:1,type:"number"},{symbol:2,formula:2,type:"number"},{symbol:3,formula:3,type:"number"},{symbol:4,formula:4,type:"number"},{symbol:5,formula:5,type:"number"},{symbol:6,formula:6,type:"number"},{symbol:7,formula:7,type:"number"},{symbol:8,formula:8,type:"number"},{symbol:9,formula:9,type:"number"},{symbol:0,formula:0,type:"number"},{symbol:"(",formula:"(",type:"number"},{symbol:")",formula:")",type:"number"},{symbol:"mc",formula:!1,type:"save"},{symbol:"m+",formula:!1,type:"save"},{symbol:"m-",formula:!1,type:"save"},{symbol:"mr",formula:!1,type:"save"},{name:"powY",symbol:"xy",formula:POWER,type:"math_function"},{name:"pow2",symbol:"x2",formula:POWER,type:"math_function"},{name:"pow3",symbol:"x3",formula:POWER,type:"math_function"},{name:"10powX",symbol:"10powX",formula:POWER,type:"math_function"},{name:"exp",symbol:"ex",formula:"Math.exp(",type:"math_function"},{name:"1divX",symbol:"1divX",formula:"1/(",type:"math_function"},{name:"square-root",symbol:"√(",formula:"Math.sqrt(",type:"math_function"},{name:"qube-root",symbol:"(3)√(",formula:"Math.cbrt(",type:"math_function"},{name:"ln",symbol:"ln2",formula:!1,type:"math_function"},{name:"log10",symbol:"log10",formula:"Math.log(10)",type:"math_function"},{name:"x-root",symbol:"√(",formula:POWER,type:"math_function"}];function calculator(button){if("operator"==button.type)data.operation.push(button.symbol),data.formula.push(button.formula);else if("number"==button.type)data.operation.push(button.symbol),data.formula.push(button.formula);else if("key"==button.type)"AC"==button.symbol?(data.operation=[],data.formula=[],updateOutputResult(0)):"←"==button.symbol&&(data.operation.pop(),data.formula.pop());else if("save"==button.type)"m+"==button.symbol?memValue+=parseInt(outputResultElement.innerHTML,10):"m-"==button.symbol?memValue-=parseInt(outputResultElement.innerHTML,10):"mr"==button.symbol?updateOutputResult(memValue):"mc"==button.symbol&&(memValue=0);else if("math_function"==button.type){var symbol,formula;"powY"==button.name?(symbol="^(",formula=button.formula,data.operation.push(symbol),data.formula.push(formula),isPow=!0):"pow2"==button.name?(symbol="^(",formula=button.formula,data.operation.push(symbol),data.formula.push(formula),data.operation.push("2)"),data.formula.push("2)"),isPow=!0):"pow3"==button.name?(symbol="^(",formula=button.formula,data.operation.push(symbol),data.formula.push(formula),data.operation.push("3)"),data.formula.push("3)"),isPow=!0):"10powX"==button.name?(symbol="10^(",formula=button.formula,data.operation.push(symbol),data.formula.push(formula),isPow=!0):"exp"==button.name?(symbol="exp(",formula=button.formula,data.operation.push(symbol),data.formula.push(formula)):"1divX"==button.name?(data.operation.push(button.formula),data.formula.push(button.formula)):"square-root"==button.name||"qube-root"==button.name?(data.operation.push(button.symbol),data.formula.push(button.formula)):"ln"==button.name?(data.operation.push(Math.LN2.toFixed(5)),data.formula.push(Math.LN2.toFixed(5))):"log10"==button.name?(data.operation.push(Math.log(10)),data.formula.push(button.formula)):"x-root"==button.name&&(data.operation.push(button.symbol),data.formula.push(button.formula),isPow=!0,isRoot=!0)}else if("calculate"==button.type){var formulaStr=data.formula.join("");return isPow&&(formulaStr=getPowBase(formulaStr),isPow=!1),void updateOutputResult(eval(formulaStr))}updateOutputOperation(data.operation.join(""))}function getPowBase(t){var o=search(data.formula,POWER),a=powerBaseGetter(data.formula,o);if(isRoot&&""===a[0])return data.formula.pop(),data.formula.shift(),data.formula.unshift("Math.sqrt("),data.formula.push(")"),t=data.formula.join(""),isRoot=!1,t;if(isRoot)a.forEach((function(o){var a=o+POWER,u="Math.pow("+o+",1/";t=t.replace(a,u)}));else if(""===a[0]){var u=POWER;t=t.replace(u,"Math.pow(10,")}else a.forEach((function(o){var a=o+POWER,u="Math.pow("+o+",";t=t.replace(a,u)}));return t}function powerBaseGetter(t,o){var a=[];return o.forEach((function(o){for(var u=[],e=0,m=o-1;m>=0;){"("==t[m]&&e--,")"==t[m]&&e++;var r=!1;OPERATORS.forEach((function(o){t[m]==o&&(r=!0)}));var l=t[m]==POWER;if(r&&0==e||l)break;u.unshift(t[m]),m--}a.push(u.join(""))})),a}function search(t,o){var a=[];return t.forEach((function(t,u){t==o&&a.push(u)})),a}function updateOutputOperation(t){outputOperationsElement.innerHTML=t}function updateOutputResult(t){outputResultElement.innerHTML=t}function themeSwitch(t){themeElements.forEach((function(o){o.classList.add(t)}))}buttonPanelElement.addEventListener("click",(function(t){var o=t.target.textContent;t.target.closest("button")&&calcButtons.forEach((function(a){(a.symbol==o||a.name==t.target.id)&&calculator(a)}))})),themeSwitch("dark")})();